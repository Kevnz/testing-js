<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Testing JavaScript</title>
    <link rel="stylesheet" type="text/css" href="build/build.css">
  </head>
  <body>
    <article>
      <section>
        <h1>Testing JavaScript</h1>
        <h3>by Kevin Isom</h3>
      </section>
      <section>
        <h2>Me</h2>
        <ul>
          <li><a href="http://kevinisom.info">KevinIsom.info</a></li>
          <li><a href="https://twitter.com/kev_nz">twitter @kev_nz</a></li>
          <li><a href="https://github.com/kevnz">github @kevnz</a></li>
        </ul>
      </section>
      <section>
        <h2>Pushpay</h2>
      </section>
      <section>
        <h2>Why test</h2>
        <ul>
          <li>IE 6</li>
          <li>IE 7</li>
          <li>IE 8</li>
          <li>IE 9...11</li>
          <li>Google Chrome</li>
          <li>FireFox</li>
          <li>Safari</li>
          <li>Opera</li>
          <li>Mobile Safari</li>
          <li>Android Browser</li>
          <li>Mobile Chrome</li>
          <li>Mobile IE</li>
          <li>Opera Mini</li>
          <li>...</li>
        </ul>
      </section>
      <section>
        <h2>Testing frameworks </h2>
        <ul>
          <li>Q Unit</li>
          <li>Jasmin</li>
          <li>Mocha</li>
          <li>Buster.js</li>
          <li>YUITest</li>
          <li>And heaps more</li>
        </ul>
      </section>
      <section>
        <h2>QUnit</h2>
        <pre><code class="language-javascript">QUnit.test( "hello test", function( assert ) {
  assert.ok( 1 == "1", "Passed!" );
});</code></pre>
      </section>
      <section>
        <h2>Jasmine</h2>
        <pre><code class="language-javascript">describe("A suite", function() {
  it("contains spec with an expectation", function() {
    expect(true).toBe(true);
  });
});</code></pre>
      </section>
      <section>
        <h2>Mocha</h2>
        <pre><code class="language-javascript">var assert = require("assert")
describe('Array', function(){
  describe('#indexOf()', function(){
    it('should return -1 when the value is not present', function(){
      assert.equal(-1, [1,2,3].indexOf(5));
      assert.equal(-1, [1,2,3].indexOf(0));
    });
  });
});</code></pre>
      </section>
      <section>
        <h2>Chai - Should</h2>
        <pre><code class="language-javascript">chai.should();
foo.should.be.a('string');
foo.should.equal('bar');
foo.should.have.length(3);
tea.should.have.property('flavors')
  .with.length(3);</code></pre>
      </section>
      <section>
        <h2>Chai - Expect</h2>
        <pre><code class="language-javascript">var expect = chai.expect;
expect(foo).to.be.a('string');
expect(foo).to.equal('bar');
expect(foo).to.have.length(3);
expect(tea).to.have.property('flavors')
  .with.length(3);</code></pre>
      </section>
      <section>
        <h2>Chai - Assert</h2>
        <pre><code class="language-javascript">var assert = chai.assert;
assert.typeOf(foo, 'string');
assert.equal(foo, 'bar');
assert.lengthOf(foo, 3)
assert.property(tea, 'flavors');
assert.lengthOf(tea.flavors, 3);</code></pre>
      </section>
      <section>
        <h2>Power-Assert</h2>
        <pre><code class="language-javascript">var assert = require('power-assert');
describe('Array', function(){
  describe('#indexOf()', function(){
    it('should return index when the value is present', function(){
      assert([1,2,3].indexOf(0) === 2);
    });
    it('should return -1 when the value is not present', function(){
      assert.ok([1,2,3].indexOf(2) === -1, 'THIS IS AN ASSERTION MESSAGE');
    });
  });
});</code></pre>
      </section>
      <section>
        <h2>Buster.js</h2>
        <h3>Test Case</h3>
        <pre><code class="language-javascript">buster.testCase("My thing", {
    "has the foo and bar": function () {
        assert.equals("foo", "bar");
    },
    
    "states the obvious": function () {
        assert(true);
    }
});
</code></pre>
      </section>
      <section>
        <h2>Buster.js</h2>
        <h3>Describe</h3>
        <pre><code class="language-javascript">buster.spec.expose();// Expose describe and it functions globally
describe("My thing", function () {
    it("has the foo and bar", function () {
        expect("foo").toEqual("bar");
    });
    it("states the obvious", function () {
        expect(true).toBe(true);;
    });
});</code></pre>
      </section>
      <section>
        <h2>YUI Test</h2>
        <h3>Test Case</h3>
        <pre><code class="language-javascript">var testCase = new Y.Test.Case({
  name: "TestCase Name",
  //traditional test names
  testSomething : function () {
      Y.assert(true === true, "Message")
  },
  testSomethingElse : function () {
      Y.Assert.isFunction(function(){}); 
  }
});</code></pre>
      </section>
      <section>
        <h2>YUI Test</h2>
        <h3>Test Case with text names</h3>
        <pre><code class="language-javascript">var testCase = new Y.Test.Case({
  name: "TestCase Name",
  //traditional test names
  "Something should happen here" : function () {
      Y.assert(true === true, "Message")
  },
  "Check something else" : function () {
      Y.Assert.isFunction(function(){}); 
  }
});</code></pre>
      </section>
      <section data-bespoke-hash="legacy-code">
        <h2>Legacy Code</h2>
        <p><blockquote>The main thing that distinguishes legacy code from non-legacy code is tests, or rather a lack of tests.</blockquote><cite>Michael Feathers - Working Effictively With Legacy Code</cite></p>
      </section>
      <section>
        <h2>Legacy Code</h2>
        <ul>
          <li>People are writing legacy code right now.</li>
          <li>Are you writing legacy code?</li>
        </ul>
      </section>
      <section>
        <h2>But JavaScript is hard to test</h2>
        <h3>Right?</h3>
      </section>
      <section><iframe src="//giphy.com/embed/POql6zsXZbmcE" width="500" height="238" frameBorder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></section>
      <section>
        <h2>The way we write it makes all the difference</h2>
      </section>
      <section>
        <h2>Things to avoid</h2>
      </section>
      <section>
        <h2>Nested callbacks</h2>
        <pre><code class="language-javascript">var fs = require('fs');
fs.mkdir('./hello',0777,function(err){
  if (err) throw err;
  
  fs.writeFile('./hello/world.txt', 'Hello!', function(err){
    if (err) throw err;
    console.log('File created with contents: ');
    
    fs.readFile('./hello/world.txt', 'UTF-8', function(err, data){
      if (err) throw err;
      console.log(data);
    });
  });
});</code></pre>
      </section>
      <section>
        <pre><code class="language-javascript">var fs = require('fs');
fs.mkdir('./hello',0777,makeDirectory);
function makeDirectory(err){
  if (err) throw err;
  fs.writeFile('./hello/world.txt', 'Hello!', writeFile);
}
function writeFile(err){
  if (err) throw err;
  console.log('File created with contents: ');
  fs.readFile('./hello/world.txt', 'UTF-8', readFile);
}
function readFile(err, data){
  if (err) throw err;
  console.log(data);
}</code></pre>
      </section>
      <section>
        <h2 class="bullet">Test Runners</h2>
        <ul>
          <li><a href="https://karma-runner.github.io/0.12/index.html">Karma</a></li>
          <li><a href="https://github.com/airportyh/testem">Testem</a></li>
          <li><a href="http://yui.github.io/yogi/">Yogi</a></li>
        </ul>
      </section>
      <section>
        <h2>Thanks</h2><br>
        <ul>
          <li><a href="https://www.pushpay.com/">Pushpay</a> </li>
          <li><a href="http://kevnz.github.io/testing-js/">http://kevnz.github.io/testing-js/</a> </li>
          <li><a href="https://github.com/Kevnz/testing-talk-code">https://github.com/Kevnz/testing-talk-code</a></li>
          <li><a href="https://www.twitter.com/kev_nz">@kev_nz</a> </li>
        </ul>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>